<style type="text/css">
    .panel{
        border-left:1px solid #ccc;
        border-right:1px solid #ccc
    }
    ul{
        list-style: none;
        align: center;
    }
    .text-field{
        cursor: pointer;
    }
    .check-box{
        width: 24px;
        height: 18px;
        border-radius: 8px;
    }
    .drag-container {
        display: flex;
        justify-content: flex-start;
        align-items: center;
    }
    .drag-container .drag-box {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 200px;
        height: 200px;
        margin: 20px;
        color: #fff;
        font-size: 20px;
        font-weight: bold;
    }
    .drag-container .drag-box .drag-item {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 150px;
        height: 150px;
    }
</style>
<div  ng-controller="neo4jRelationController as demo">
    <div align="center" class="panel panel-primary" style="overflow: hidden;text-overflow: ellipsis;white-space: nowrap;">
        <div class="topnavbar" style="height: 50px;">
            <div align="left">
                <label  style="margin-left:10px;margin-top:10px;" ><strong style="color: #FFF">关系初始化</strong></label>
            </div>
            <div align="right" style="margin-top:-30px;">
                <input type="button" value="新增" style="margin-right:10px" class="btn btn-default btn-lg btn-sm" ng-click="add();" />
            </div>
        </div>


        <div class="form-inline">
            <!--左半部分-->
             <div  align="left" style="width: 30%" class="input-group panel">
                 <div style="margin-left:30px;">
                 <h4>节点拖拽选择</h4>
                 </div>
                 <input type="hidden"   type="text" ng-model="deleteUrl_1" >
                 <input type="hidden"   type="text" ng-model="addUrl_1" >
                 <input type="hidden"   type="text" ng-model="param_1" >
                 <tree-view tree-data="demo.tree"
                            text-field="name"
                            value-field='id'
                            item-clicked="demo.itemClicked($item)"
                            item-checked-changed="demo.itemCheckedChanged($item)"
                            can-checked="true" >
                 </tree-view>
             </div>

            <!--右半部分-->
            <div style="margin-left:5px;width: 69%" class="input-group panel">
                <div class="panel-heading  topnavbar">
                    <strong style="color: #FFF">关系列表</strong>
                </div>
                <div class="panel-body">
                    <table  datatable="ng" dt-options="dtOptions" dt-column-defs="dtColumnDefs" class="row-border hover">
                        <thead>
                        <tr>
                            <th>序号</th>
                            <th>类型</th>
                            <th>业务编号</th>
                            <th>申报内容</th>
                            <th>申报时间</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="item in obj">
                            <td align="center" style="width:50px">{{item.no}}</td>
                            <td align="left" style="width:150px">{{item.typeName}}</td>
                            <td align="left" style="width:100px">{{item.businessId}}</td>
                            <td align="left" style="width:300px">{{item.detail}}</td>
                            <td align="left" style="width:300px">{{item.createTime}}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div  id = "cnDiv" class="panel panel-primary" style="top: 150px; left: 300px; position: absolute; width: 300px; height: 460px; z-index: 9999;overflow-y:auto;">
        <div id="cnDivheader" class="panel-heading topnavbar" style="cursor: move">
            添加/修改<input type="button" value="关闭" style="margin-left:220px" class="btn btn-default" ng-click="close();" >
        </div>
        <div class="panel-body">
            <div  class="form-group" style="top: 20px;width: 250px" >
                <span>请填写关系名称<input placeholder="必填" class="form-control" type="text" ng-model="relationship" ></span>
            </div>
            <div  class="form-group" style="top: 20px;width: 250px" >
                <span>请填写案件名称<input placeholder="必填" class="form-control" type="text" ng-model="caseName_1" ></span>
            </div>
            <div  class="form-group" style="top: 20px;width: 250px" >
                <span>请填写案件信息<textarea rows="5" cols="30" ng-model="caseInfo_1"></textarea></span>
            </div>
            <div  class="form-group" style="top: 20px;width: 250px" >
                <div align="right" style="margin-top:10px">
                    <input type="button" value="保存"  class="btn btn-primary topnavbar" ng-click="saveOrUpdate();" >
                </div>
            </div>
        </div>
    </div>

    <script type="text/ng-template" id="treeView.html">
        <input type="hidden"   type="text" ng-model="deleteUrl" >
        <input type="hidden"   type="text" ng-model="addUrl" >
        <input type="hidden"   type="text" ng-model="paramOne" >
        <div style="margin-left:30px;">
        <input type="button" value="展开" style="margin-right:10px;margin-bottom: 20px;" class="btn btn-info btn-lg btn-sm" ng-click="expandAll(treeData);" />
        <input type="button" value="收起" style="margin-right:10px;margin-bottom: 20px;" class="btn btn-info btn-lg btn-sm" ng-click="collapseAll(treeData);" />
        </div>
        <ul class="tree-view">
            <input  type="hidden" type="text" ng-model="id_2" >
            <li ng-repeat="item in treeData" ng-include="itemTemplateUrl || 'treeItem.html'" ></li>
        </ul>
    </script>
    <script type="text/ng-template" id="treeItem.html">

        <!--是叶子允许拖动-->
        <div ng-if="isLeaf(item)" class="drag-item" ng-drag="true" ng-drag-data="{{item}}" ng-style="css">
            <i ng-click="itemExpended(item, $event);" class="{{getItemIcon(item)}}"></i>
            <input type="checkbox" disabled="disabled" ng-model="item.isChecked"  class="check-box" ng-if="true">
            <span class='text-field' ng-click="warpCallback('itemClicked', item, $event);" >{{item[textField]}}</span>
        </div>

        <div ng-if="!isLeaf(item)">
            <i ng-click="itemExpended(item, $event);" class="{{getItemIcon(item)}}"></i>
            <input type="checkbox" disabled="disabled" ng-model="item.isChecked"  class="check-box" ng-if="true">
            <span class='text-field' ng-click="warpCallback('itemClicked', item, $event);" >{{item[textField]}}</span>
        </div>

        <ul ng-if="!isLeaf(item)"
            ng-show="item.$$isExpend"
            style="color: #06b6ef">
            <li ng-repeat="item in item.submenu" class="drag-box" ng-drop="true" ng-drop-success="onDropComplete(item.id, $data, $event)"  ng-include="itemTemplateUrl || 'treeItem.html'">
            </li>
        </ul>
    </script>
</div>